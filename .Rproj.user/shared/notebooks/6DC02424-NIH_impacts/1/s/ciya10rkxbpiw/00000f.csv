"0","# commute is a dataframe derived from 2022 Census data with the following columns"
"0","# ORIGIN: is the FIPS code for the county of residence"
"0","# DESTINATION: is the FIPS code for the county of work"
"0","# COMMUTES: is the number of workers commuting from the specific ORIGIN to DESTINATION"
"0",""
"0","# IMPORTANT: some FIPS codes have leading zeros"
"0","commute_raw <- read.csv(""./data/OD_countySum001_2016.csv"") %>%"
"0","  mutate(ORIGIN = str_pad(ORIGIN, 5, pad = ""0""),"
"0","         DESTINATION = str_pad(DESTINATION, 5, pad = ""0""))"
"0",""
"0","# calculate proportion weights"
"0","commute <- commute_raw %>% "
"0","  # calculate the total number of workers who work in a given county"
"0","  group_by(DESTINATION) %>%"
"0","  summarize(DESTINATION_total_workers = sum(COMMUTES)) %>%"
"0","  # join this back to the full commuter dataframe"
"0","  left_join(commute_raw) %>%"
"0","  # for each ORIGIN - DESTINATION pair, calculate proportion as the number"
"0","  # of workers from ORIGIN who work in DESTINATION divided by the total "
"0","  # number of people who work in DESTINATION"
"0","  mutate(proportion = COMMUTES/DESTINATION_total_workers)"
"2","Joining with `by = join_by(DESTINATION)`"
"0","# Quality check: all destination weights should sum to 1"
"0","commute %>% "
"0","  group_by(DESTINATION) %>% "
"0","  summarize(sum = round(sum(proportion), digits=5)) %>% "
"0","  filter(sum < 1) %>%"
"0","  nrow() "
"1","[1]"
"1"," 0"
"1","
"
