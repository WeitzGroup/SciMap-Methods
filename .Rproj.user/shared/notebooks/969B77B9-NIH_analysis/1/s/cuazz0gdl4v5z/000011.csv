"0","sum(comp$static_IDC_loss)"
"1","[1]"
"1"," 16611177192"
"1","
"
"0","comp %>% filter(IDC_econ_loss>100000) %>% dim()"
"1","[1]"
"1"," 2136"
"1","   11"
"1","
"
"0","comp %>% filter(IDC_econ_loss>100000 & static_IDC_loss==0) %>% dim()"
"1","[1]"
"1"," 1764"
"1","   11"
"1","
"
"0","out_loss <- commute_NIH %>% "
"0","                filter(DESTINATION != ORIGIN) %>% "
"0","                mutate(prop_loss = IDC_econ_loss * proportion) %>% "
"0","                select(prop_loss) %>%"
"0","                sum(na.rm=TRUE)"
"0",""
"0","out_loss"
"1","[1]"
"1"," 7996436390"
"1","
"
"0","out_loss/tot_loss"
"1","[1]"
"1"," 0.4813889"
"1","
"
"0","comp %>% filter(static_IDC_loss==0) %>% select(IDC_econ_loss) %>% summary()"
"1",""
"1"," IDC_econ_loss     "
"1","
"
"1"," Min.   :     179  "
"1","
"
"1"," 1st Qu.:   56537  "
"1","
"
"1"," Median :  179194  "
"1","
"
"1"," Mean   :  932118  "
"1","
"
"1"," 3rd Qu.:  581908  "
"1","
"
"1"," Max.   :48036363  "
"1","
"
"0","comp %>% "
"0","  filter(static_IDC_loss < IDC_econ_loss & static_IDC_loss > 0) %>%"
"0","  nrow()"
"1","[1]"
"1"," 236"
"1","
"
"0","comp %>%"
"0","  filter(static_IDC_loss != 0) -> static_loss_df"
"0","cor.test(static_loss_df$static_IDC_loss, static_loss_df$IDC_econ_loss, method = ""spearman"")"
"1","
"
"1","	Spearman's rank correlation rho"
"1","
"
"1","
"
"1","data:  "
"1",""
"1","static_loss_df$static_IDC_loss and static_loss_df$IDC_econ_loss"
"1",""
"1","
"
"1","S = 2274210, p-value < 0.00000000000000022"
"1","
"
"1","alternative hypothesis: "
"1","true "
"1",""
"1","rho"
"1",""
"1"," is "
"1",""
"1","not equal to"
"1",""
"1"," "
"1",""
"1","0"
"1",""
"1","
"
"1","sample estimates:
"
"1","      rho "
"1","
"
"1","0.7433027 "
"1","
"
"1","
"
"0","tab1 <- comp %>%"
"0","  arrange(desc(static_IDC_loss/IDC_econ_loss)) %>%"
"0","  select(county, state, IDC_econ_loss, static_IDC_loss, IDC_loss, IDC_job_loss) %>%"
"0","  head(5) %>%"
"0","  mutate(Name = paste(str_to_title(county), state, sep="", "")) %>%"
"0","  mutate(`Economic Loss (Static)` = paste0(""$"", round(static_IDC_loss/1000000, digits=0), ""M"")) %>%"
"0","  mutate(`Economic Loss (Commuter)` = paste0(""$"", round(IDC_econ_loss/1000000, digits=0), ""M"")) %>%"
"0","  mutate(`Job Loss (Commuter)` = round(IDC_job_loss, digits=0)) %>%"
"0","  select(Name, `Economic Loss (Static)`, `Economic Loss (Commuter)`, `Job Loss (Commuter)`) "
"0",""
"0","tab2 <- comp %>%"
"0","  arrange(desc(IDC_econ_loss/(1+static_IDC_loss))) %>%"
"0","  select(county, state, IDC_econ_loss, static_IDC_loss, IDC_loss, IDC_job_loss) %>%"
"0","  head(5) %>%"
"0","  mutate(Name = paste(str_to_title(county), state, sep="", "")) %>%"
"0","  mutate(`Economic Loss (Static)` = paste0(""$"", round(static_IDC_loss/1000000, digits=0), ""M"")) %>%"
"0","  mutate(`Economic Loss (Commuter)` = paste0(""$"", round(IDC_econ_loss/1000000, digits=0), ""M"")) %>%"
"0","  mutate(`Job Loss (Commuter)` = round(IDC_job_loss, digits=0)) %>%"
"0","  select(Name, `Economic Loss (Commuter)`, `Job Loss (Commuter)`)"
"0",""
"0","# top 5 institutions"
"0","top_inst_df <- read.csv(""output/methods/county_commute_NIH_inst.csv"")"
"0",""
"0","for(my_fips in tab2$Name){"
"0","  this_df <- filter(top_inst_df, my_fips == FIPS)"
"0","}"
"0",""
"0","form_tab1 <- kable(tab1, format=""latex"", booktabs=TRUE) %>%"
"0","  kable_styling(latex_options = ""scale_down"") %>%"
"0","  add_header_above(c("" "" = 2, ""High Outflow Counties"" = 0))"
"0",""
"0","form_tab2 <- kable(tab2, format=""latex"", booktabs=TRUE) %>%"
"0","  kable_styling(latex_options = ""scale_down"") %>%"
"0","  add_header_above(c("" "" = 2, ""High Inflow Counties"" = 0))"
"0",""
"0","cat(form_tab1, ""\n\n"", form_tab2, file=""figs/table.tex"")"
"0",""
"0","sum(comp$terminated_econ_loss)"
"1","[1]"
"1"," 8162016196"
"1","
"
"0","comp %>% filter(static_term_loss>0) %>% nrow()"
"1","[1]"
"1"," 191"
"1","
"
"0","arrange(comp, desc(static_term_loss)) %>% select(FIPS, static_term_loss) %>% mutate(static_term_loss=static_term_loss/1000000000)"
